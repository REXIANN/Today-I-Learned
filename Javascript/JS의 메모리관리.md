# JS의 메모리관리

출처: 공부
태그: 메모리관리, 자바스크립트

C언어 같은 저수준 언어에서는 메모리 관리를 위해 `malloc()` 과 `free()` 를 사용한다. 자바스크립트는 객체가 생성되었을 때 자동으로 메모리를 할당하고 쓸모없어졌을 때 자동으로 해제한다(가비지 컬렉션). 이러한 자동 메모리 관리는 잠재적 혼란의 원인이기도 한데, 개발자가 메모리 관리에 대해 고민할 필요가 없다는 잘못된 인상을 줄 수 있기 때문이다.

# 메모리 생존주기

메모리 생존주기는 프로그래밍 언어와 관계없이 비슷하다.

1. 필요할 때 할당한다.
2. 사용한다. (읽기, 쓰기)
3. 필요 없어지면 해제 한다.

두번째 부분은 모든 언어에서 명시적으로 사용된다. 그러나 첫 번째  부분과 마지막 부분은 저수준 언어에서는 명시적이며, 자바스크립트와  같은 대부분의 고수준 언어에서는 암묵적으로 작동한다. 

## 자바스크립트에서 메모리 할당

### 값 초기화

자바스크립트는 값을 선언할 때 자동으로 메모리를 할당한다

```jsx
var n = 123; // 정수를 담기 위한 메모리 할당
var s = 'azerty'; // 문자열을 담기 위한 메모리 할당

var o = {
	a: 1,
	b: null
}; // 오브젝트와 그 오브젝트에 포함된 값들을 담기 위한 메모리 할당

// (오브젝트) 배열과 배열에 담긴 값들을 위한 메모리 할당
var a = [1, null, 'abra'];

function f(a) {
	return a + 2;
}; // 함수를 위한 할당(함수는 호출가능한 오브젝트이다)

// 함수식 또한 오브젝트를 담기 위한 메모리를 할당한다
someElement.addEventListener('click', function() {
	someElement.style.backgroundColor = 'blue';
}, false);
```

## 함수 호출을 통한 할당

[자바스크립트의 메모리관리 - JavaScript | MDN](https://developer.mozilla.org/ko/docs/Web/JavaScript/Memory_Management)

[당신이 모르는 자바스크립트의 메모리 누수의 비밀](https://ui.toast.com/weekly-pick/ko_20210611)